# NOIP 2021

## Day1 T3

看不懂题解

## Day1 T4

考虑如何判断平局：若 $Res_A = Res_B$，则 $A\oplus B = 0$，也就是所有数的异或和为零，反过来也成立。因此平局的充要条件是异或和为零。

考虑异或总和的最高一位，$Res_A,Res_B$ 中必定有一个在这一位上是 $1$，另一个是 $0$，这已经足够判定胜负。又考虑到异或运算按位独立，所以我们可以每个数只留下这一位。

分类讨论。

可以证明，删去头尾相同的元素之后，剩下的东西一定由若干 `00` 或者 `11` 组成。

先一直删去头尾相同的元素，直到第一处头尾不同的元素这里。不妨假设头为 $1$，尾为 $0$ .

然后假设存在一个“没有配对”的 $1$，那么从 $1$ 的这一端开始删，

## NOIP20 Day2T3

**题意**：删去一些边，保证尽量多点的度数是奇数，在此基础上，让删掉的边编号尽量大。

其中，“编号尽量大”指【编号为 $i$ 的边保留与否】形成的01串的字典序取到最大值。

**做法**：观察删边操作的性质，要么让两个奇度数的点变成两个偶度数的点，要么反过来，要么交换两个点度数的奇偶性。

不难发现，其实仅对一棵生成树中的边进行删除，就可以完成所有能通过删边完成的操作。

> 如果想要反转/交换两个点的奇偶性，可以在生成树上找到它们之间的路径，将这一条路径上边的选取状态（保留/不保留）取反。这样只有路径两端的点的奇偶性会发生变化。

不难发现，树上的路径反转操作真包含了删边操作。因此一定存在一棵生成树，使得正解

> 启发：尽量考虑“可逆”的操作来便于计算。

找到最大生成树，尝试证明最优解可以在这棵树里面调整出来。

> 引理：对于一个最大生成树的边集 $G$，和一个任意生成树的边集 $K$，令 $G' = G-G\cap K,K' = K-G\cap K$ . 那么一定有 $\min G' \geq \min K'$ .
> 
> 证明：考虑求出 $G\cap K$，然后把这些边在原图中缩点，现在 $G'$ 仍然是新图的最大生成树（可以看做提前把一些一定会被用的边提前加进并查集）。并且 $K'$ 也一定是新图的一棵生成树，那么根据熟知结论，$G'$ 中最小的边一定大于等于 $K'$ 中最小的边。

假设在最大生成树 $A$ 上调整时，可以使得度数为奇数的点最多，但是不能调出最大的字典序，而只有另一颗生成树 $B$ 才能调出正解。

## NOIP20 Day4T3

**题意**：称一个数对 $(s,c)$ 合法，当且仅当存在一组边长均为正整数的矩形，其面积之和为 $s$，其周长之和为 $c$ . 给定 $N,M$，求出 $s\leq N,c\leq M$ 的合法数对有多少个。

**做法**：考虑把构成数对的矩形简化到固定的模式，考虑什么样的矩形组合是方便DP的。

> 可以让所有矩形都有统一的宽/长吗？

不可以，这样无法导出全部的数对。

> 退而求其次，可以只保留一部分的矩形宽度吗？

可以的！把所有“竖着”的矩形“放倒”，就能把矩形的宽限制在 $\sqrt{N}$ 级别。

现在我们使用的矩形形如 $\sqrt{N}$ 组宽度相等，长度不等的矩形。考虑进一步化简，注意到两个 $(h_1,w)(h_2,w)$ 的矩形可以合并成 $(h_1+h_2-1,w)(1,w)$ 的矩形。

那么我们把刚才的每一行都合并，每次合并出来的长为 $1$ 的矩形放在一起，然后把他们视作一些宽为 $1$ 的矩形，然后对这些矩形再次化简。

这样我们就把任意一种情况化简成了【若干个宽各不相同的矩形】+【任意多个 $(1,1)$】的情况。

考虑对于一些 $4s-c$ 相同的数对，可以通过增加/减少 $(1,1)$ 的方式进行转化。因此我们只要对于每一个 $4s-c$  的取值，计算出可以由矩形拼出的最小的 $c$ 是多少即可。

> 为了节省时间，这里可以将 $C\leftarrow \frac{C}{2}$ . 然后式子改成 $2s-c$ .

DP的时候，设计状态 $f[i]$ 表示 $4s-c = i$ 的所有合法数对中，最小的 $c$ 是多少。转移时，每次多考虑一种矩形的宽 $w$，方程形如：

> 注意到，$4s-c\geq 0$ .

$$
f[i] = \min_{h=0}^{\lfloor\frac{i+2w}{4w-2}\rfloor}f[i-4hw+2h+2w] + 2h+2w
$$

即

$$
f[i] = \min_{h=0}^{\lfloor\frac{i+2w}{4w-2}\rfloor}[(2-4w)h+2w+i]+2h+2w
$$

观察到决策集合是一个一次函数的形式，以 $4w-2$ 为周期出现重叠，而每次出现重叠相当于在一个已有的集合里面添加一个新元素。所以对于每一个决策集合，动态维护它里面的最小值就可以轻松做到 $O(n)$ 转移了。

而一共有 $O(\sqrt{n})$ 个 $w$ 需要枚举，所以复杂度是 $O(n\sqrt{n})$ .