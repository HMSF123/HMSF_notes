---
title: 图论什么的
updated: 2023-03-24 01:49:17Z
created: 2023-03-23 02:11:32Z
latitude: 35.10467400
longitude: 118.35641400
altitude: 0.0000
---

# Part 0 欧拉路径&欧拉回路

记得要加当前弧优化。

直接搜索，在搜索函数的最后把当前边压入栈。

最后从顶到底输出，如果有回路找到的一定是回路。

# Part 1 差分约束

必须要明确的是：如果无法确定从哪个点开始能走遍整张图，那么差分约束必须要建超级源点，向所有点连权值为零的边。因为直接跑的话图很有可能不连通，导致需要跑多遍，复杂度就假了。

而这个建立超级源点的操作也附带了一个性质：所有变量最终的取值都小于等于零。所以遇到要求所有变量大于等于零的需要先取反。

如果见了超级源点，还附带一个字典序极值的性质。

> 当然，这里必须要求序列有整体上界才会有字典序最大值，由总体下界才会有字典序最小值。

为什么？

有一个序列，要求所有的数小于等于零，并且附带一些限制。

考虑跑完最短路之后，每个点的最短路一定是由一条边转移而来——也就是恰好取到最小的限制的等号。所以一旦这个值再大一点，就会至少违反一个限制，所以每一个变量都是理论的最大值。

所以总体的字典序就是理论最大——无论怎样排列序列都是如此。

那如果要求总体字典序最小呢？很简单，因为大于等于零的不方便处理，我们把所有的限制取反，最后把得到的最短路也取反，得到的就是整体限制大于等于零时的最大字典序了。

# Part 2 带权并查集

这玩意的本质就是维护每个点到一个标志点的路径的信息。

比如CSP2022数据传输，可以把询问挂在LCA上，每次自底向上合并，带权并查集维护每个点到当前LCA（并查集中的根）的矩阵乘法。

# Part 3 圆方树

圆方树一般用于考虑侧重于**节点**的无向图路径问题。

利用性质：一个点双内任意两点间都有两个完全不相交路径。

# Part 4 2-SAT

简单来说，每一个点 $a_{x,y}$ 相当于一个命题【变量 $x$ 取值为 $y$】，如果一个命题 $a_{i,p}$ 能够**推出**（充分条件）另一个命题 $a_{j,q}$ 的成立，那么就由前者向后者连边，一般来说每个限制会至少连出两条边。

那么我们最终要对于每一个 $a_{x,0/1}$，挑出其中一个状态，使之不能走到这一对中的另一个状态。

而在进行这之前，我们要先判断一下无解的情况：如果一对状态中的两个状态都在一个 SCC 中，那么无论选择哪个都会造成矛盾，所以此时是无解的。

判断完无解之后，我们只需要对于每一对状态，挑选拓扑序比较小的一个拿出来就好了。（为了保证有多个连通块时的正确性，计算拓扑排序时必须用队列）

当然有更简单的方法，Tarjan 的同时求出来的SCC编号本身就是逆拓扑序，所以我们选择SCC编号较大的那个。

## 例题

### [集训队互测2021] 序列

先考虑对于每个位置而言，一定存在一种方案，我们把它赋值成了在限制里面出现过的值，所以一个点的取值方案可以缩小到很小的级别，准确来说应该是 $2\times 3\times m$（一个限制给三个位置带来一种可能取值，并且要考虑该命题是/否成立）

然后每一个状态 $T_{i,j},F_{i,j}$ 表示 $a_i$ 是否 $<j$（注意一定是小于），观察【让 $a_i$ 获得了 $j$ 这个可能取值】的限制中的三个点 $a_i,a_s,a_t$，一定会有一个点等于这个限制的值，而 $a_i<j$，也就是说 $a_i$ 把那个“提供 $\min$ 的角色”占据了，所以可以得到 $a_s\geq j,a_t\geq j$，这二者谁也不能提供 $\min$ 了。

# Part 5 同余最短路

一般用于“拼凑”某个东西，一般我们不关心具体拼凑出来了什么值（或者说不一定只有一个合法值），只关心拼凑出来的这个东西模上一个数 $p$ 后等于一个特定的值就算符合条件了，这时可以使用同余最短路。

> yx曰：
>
> 你考虑建出完整的无限图。你可以把边分类，满足它 mod x 起点和终点的编号 以及权值相等，满足每一个同余类内都存在这样的出边。这样归纳，你走出来的路径必然能对应上原图的一个路径。


